{"version":3,"file":"5959-45566315d7440d9a2e54.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/Clear.js","webpack://jacdac-docs/./src/components/CmdButton.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardCharacterScreen.tsx","webpack://jacdac-docs/./src/components/hooks/useMounted.ts","webpack://jacdac-docs/./src/components/widgets/CharacterScreenWidget.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Clear');\nexports.default = _default;","import { darken, lighten } from \"@mui/material\"\nimport { styled } from \"@mui/material/styles\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, { CSSProperties, ReactNode, useEffect, useState } from \"react\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport ErrorIcon from \"@mui/icons-material/Error\"\nimport IconButtonWithTooltip from \"./ui/IconButtonWithTooltip\"\nimport useAnalytics, { EventProperties } from \"./hooks/useAnalytics\"\nimport useMounted from \"./hooks/useMounted\"\nimport clsx from \"clsx\"\nimport useSnackbar from \"./hooks/useSnackbar\"\nimport useBus from \"../jacdac/useBus\"\nimport OptionalTooltip from \"./widgets/OptionalTooltip\"\n\nconst PREFIX = \"CmdButton\"\n\nconst classes = {\n    ack: `${PREFIX}Ack`,\n    error: `${PREFIX}Error`,\n}\n\nconst Root = styled(\"span\")(({ theme }) => ({\n    [`& .${classes.ack}`]: {\n        color: \"#fff\",\n        fontWeight: theme.typography.fontWeightMedium,\n        backgroundColor: theme.palette.success.main,\n    },\n\n    [`& .${classes.error}`]: {\n        color: \"#fff\",\n        backgroundColor: (theme.palette.mode === \"light\" ? lighten : darken)(\n            theme.palette.error.main,\n            0.6\n        ),\n    },\n}))\n\nconst ACK_RESET_DELAY = 500\nconst ERROR_RESET_DELAY = 2000\n\nexport default function CmdButton(props: {\n    onClick: (mounted: () => boolean) => Promise<void>\n    className?: string\n    style?: CSSProperties\n    title?: string\n    children?: ReactNode\n    icon?: JSX.Element\n    size?: \"small\" | \"large\" | undefined\n    variant?: \"outlined\" | \"contained\" | undefined\n    disabled?: boolean\n    disableReset?: boolean\n    autoRun?: boolean\n    trackName?: string\n    trackProperties?: EventProperties\n    ackResetDelay?: number\n    color?:\n        | \"inherit\"\n        | \"primary\"\n        | \"secondary\"\n        | \"error\"\n        | \"info\"\n        | \"success\"\n        | \"warning\"\n}) {\n    const {\n        onClick,\n        className,\n        style,\n        children,\n        icon,\n        title,\n        disabled,\n        disableReset,\n        autoRun,\n        trackName,\n        trackProperties,\n        ackResetDelay,\n        color,\n        ...others\n    } = props\n    const bus = useBus()\n    const { setError: setAppError } = useSnackbar()\n\n    const [working, setWorking] = useState(false)\n    const [ack, setAck] = useState(false)\n    const [error, setError] = useState(undefined)\n    const { trackEvent } = useAnalytics()\n    const mounted = useMounted()\n\n    const _disabled = disabled || working\n\n    const run = async () => {\n        if (working) return // already working\n\n        if (trackName) trackEvent(\"cmd.\" + trackName, trackProperties)\n        try {\n            setError(undefined)\n            setAck(false)\n            setWorking(true)\n            await onClick(mounted)\n            if (!mounted()) return\n            setAck(true)\n            if (!disableReset) {\n                await bus.delay(ackResetDelay || ACK_RESET_DELAY)\n                if (!mounted()) return\n                setAck(false)\n            }\n        } catch (e) {\n            if (!mounted()) return\n            setAppError(e)\n            setError(e)\n            if (!disableReset) {\n                await bus.delay(ERROR_RESET_DELAY)\n                if (!mounted()) return\n                setError(undefined)\n            }\n        } finally {\n            if (mounted()) setWorking(false)\n        }\n    }\n\n    const handleClick = async (ev: React.MouseEvent<HTMLButtonElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        run()\n    }\n\n    const statusIcon = error ? <ErrorIcon /> : undefined\n    const modeClassName = error ? classes.error : ack ? classes.ack : undefined\n    const elClassName = clsx(className, modeClassName)\n\n    // run once\n    useEffect(() => {\n        if (autoRun && mounted()) run()\n    }, [autoRun])\n\n    return (\n        <Root>\n            {!children && icon ? (\n                <IconButtonWithTooltip\n                    className={elClassName}\n                    style={style}\n                    onClick={handleClick}\n                    aria-label={title}\n                    title={title}\n                    disabled={_disabled}\n                    color={color}\n                    {...others}\n                >\n                    {statusIcon || icon}\n                </IconButtonWithTooltip>\n            ) : (\n                <OptionalTooltip title={title} placement=\"bottom\">\n                    <Button\n                        className={elClassName}\n                        style={style}\n                        startIcon={icon}\n                        endIcon={statusIcon}\n                        onClick={handleClick}\n                        aria-label={title}\n                        title=\"\"\n                        disabled={_disabled}\n                        color={color}\n                        {...others}\n                    >\n                        {children}\n                    </Button>\n                </OptionalTooltip>\n            )}\n        </Root>\n    )\n}\n","import React, { ChangeEvent, useEffect, useState } from \"react\"\nimport {\n    CharacterScreenReg,\n    CharacterScreenTextDirection,\n    CharacterScreenVariant,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport { Grid, TextField } from \"@mui/material\"\nimport useRegister from \"../hooks/useRegister\"\nimport CmdButton from \"../CmdButton\"\nimport ClearIcon from \"@mui/icons-material/Clear\"\nimport CharacterScreenWidget from \"../widgets/CharacterScreenWidget\"\nimport DashboardRegisterValueFallback from \"./DashboardRegisterValueFallback\"\n\n// https://en.wikipedia.org/wiki/Braille_ASCII\nconst BRAILE_CHARACTERS = {\n    \" \": \"⠀\", // space bar to dot-0\n    \"-\": \"⠤\",\n    \",\": \"⠠\",\n    \";\": \"⠰\",\n    \":\": \"⠱\",\n    \"!\": \"⠮\",\n    \"?\": \"⠹\",\n    \".\": \"⠨\",\n    \"(\": \"⠷\",\n    \"[\": \"⠪\",\n    \"@\": \"⠈\",\n    \"*\": \"⠡\",\n    \"/\": \"⠌\",\n    \"'\": \"⠄\",\n    '\"': \"⠐\",\n    \"\\\\\": \"⠳\",\n    \"&\": \"⠯\",\n    \"%\": \"⠩\",\n    \"^\": \"⠘\",\n    \"+\": \"⠬\",\n    \"<\": \"⠣\",\n    \">\": \"⠜\",\n    $: \"⠫\",\n    \"0\": \"⠴\",\n    \"1\": \"⠂\",\n    \"2\": \"⠆\",\n    \"3\": \"⠒\",\n    \"4\": \"⠲\",\n    \"5\": \"⠢\",\n    \"6\": \"⠖\",\n    \"7\": \"⠶\",\n    \"8\": \"⠦\",\n    \"9\": \"⠔\",\n    A: \"⠁\",\n    B: \"⠃\",\n    C: \"⠉\",\n    D: \"⠙\",\n    E: \"⠑\",\n    F: \"⠋\",\n    G: \"⠛\",\n    H: \"⠓\",\n    I: \"⠊\",\n    J: \"⠚\",\n    K: \"⠅\",\n    L: \"⠇\",\n    M: \"⠍\",\n    N: \"⠝\",\n    O: \"⠕\",\n    P: \"⠏\",\n    Q: \"⠟\",\n    R: \"⠗\",\n    S: \"⠎\",\n    T: \"⠞\",\n    U: \"⠥\",\n    V: \"⠧\",\n    W: \"⠺\",\n    X: \"⠭\",\n    Z: \"⠵\",\n    \"]\": \"⠻\",\n    \"#\": \"⠼\",\n    Y: \"⠽\",\n    \")\": \"⠾\",\n    \"=\": \"⠿\",\n    _: \"⠸\",\n}\nfunction brailify(s: string) {\n    if (!s) return s\n    let r = \"\"\n    const su = s.toLocaleUpperCase()\n    for (let i = 0; i < su.length; ++i) {\n        r += BRAILE_CHARACTERS[su.charAt(i)] || \"?\"\n    }\n    return r\n}\n\nexport default function DashboardCharacterScreen(props: DashboardServiceProps) {\n    const { service, expanded } = props\n\n    const messageRegister = useRegister(service, CharacterScreenReg.Message)\n    const rowsRegister = useRegister(service, CharacterScreenReg.Rows)\n    const columnsRegister = useRegister(service, CharacterScreenReg.Columns)\n    const textDirectionRegister = useRegister(\n        service,\n        CharacterScreenReg.TextDirection\n    )\n    const variantRegister = useRegister(service, CharacterScreenReg.Variant)\n    const brightnessRegister = useRegister(\n        service,\n        CharacterScreenReg.Brightness\n    )\n    const [message] = useRegisterUnpackedValue<[string]>(messageRegister, props)\n    const [rows] = useRegisterUnpackedValue<[number]>(rowsRegister, props)\n    const [columns] = useRegisterUnpackedValue<[number]>(columnsRegister, props)\n    const [textDirection] = useRegisterUnpackedValue<[number]>(\n        textDirectionRegister,\n        props\n    )\n    const [variant] = useRegisterUnpackedValue<[CharacterScreenVariant]>(\n        variantRegister,\n        props\n    )\n    const [brightness] = useRegisterUnpackedValue<[number]>(\n        brightnessRegister,\n        props\n    )\n\n    const [fieldMessage, setFieldMessage] = useState(message)\n\n    const handleClear = async () => {\n        setFieldMessage(\"\")\n        await messageRegister.sendSetStringAsync(\"\", true)\n    }\n    const handleFieldMessageChange = async (\n        ev: ChangeEvent<HTMLTextAreaElement>\n    ) => {\n        setFieldMessage(ev.target.value)\n        await messageRegister.sendSetStringAsync(ev.target.value, true)\n    }\n\n    // set first value of message\n    useEffect(() => {\n        if (!fieldMessage && message) setFieldMessage(message)\n    }, [message])\n\n    if (rows === undefined || columns === undefined)\n        return (\n            <DashboardRegisterValueFallback\n                register={rows === undefined ? rowsRegister : columnsRegister}\n            />\n        ) // size unknown\n\n    const converter: (s: string) => string =\n        variant === CharacterScreenVariant.Braille ? brailify : s => s\n    const cmessage = message?.split(\"\").map(converter).join(\"\")\n    const rtl = textDirection === CharacterScreenTextDirection.RightToLeft\n\n    return (\n        <Grid container spacing={1}>\n            {expanded && (\n                <Grid item xs={12}>\n                    <Grid container spacing={1}>\n                        <Grid item xs>\n                            <TextField\n                                label=\"text\"\n                                value={fieldMessage}\n                                onChange={handleFieldMessageChange}\n                                multiline={true}\n                                rows={rows || 2}\n                                fullWidth={true}\n                            />\n                        </Grid>\n                        <Grid item>\n                            <CmdButton\n                                title=\"clear the entire display\"\n                                onClick={handleClear}\n                                icon={<ClearIcon />}\n                            />\n                        </Grid>\n                    </Grid>\n                </Grid>\n            )}\n            <Grid item xs>\n                <CharacterScreenWidget\n                    rows={rows}\n                    columns={columns}\n                    rtl={rtl}\n                    message={cmessage}\n                    disabled={brightness === 0}\n                />\n            </Grid>\n        </Grid>\n    )\n}\n","import { useEffect, useRef } from \"react\"\n\nexport default function useMounted(): () => boolean {\n    const mounted = useRef(false)\n    useEffect(() => {\n        mounted.current = true\n        return () => {\n            mounted.current = false\n        }\n    }, [])\n    return () => mounted.current\n}\n","import React from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\n\nexport default function CharacterScreenWidget(props: {\n    rows: number\n    columns: number\n    message: string\n    rtl?: boolean\n    disabled?: boolean\n}) {\n    const { rows, columns, message, rtl, disabled } = props\n    const { textPrimary, background, controlBackground } =\n        useWidgetTheme(\"primary\")\n    const cw = 8\n    const ch = 10\n    const m = 1\n    const mo = 2\n    const fs = 8\n\n    const w = columns * (cw + m) - m + 2 * mo\n    const h = rows * (ch + m) - m + 2 * mo\n\n    const lines = (message || \"\").split(/\\n/g)\n    const els: JSX.Element[] = []\n\n    let y = mo\n    for (let row = 0; row < rows; ++row) {\n        let x = mo\n        const line = lines[row]\n        for (let column = 0; column < columns; ++column) {\n            const char = line?.[rtl ? columns - 1 - column : column]\n            els.push(\n                <g key={`${row}-${column}`}>\n                    <rect\n                        x={x}\n                        y={y}\n                        width={cw}\n                        height={ch}\n                        fill={controlBackground}\n                    />\n                    {char && (\n                        <text\n                            x={x + cw / 2}\n                            y={y + ch - fs / 3}\n                            textAnchor=\"middle\"\n                            fontSize={fs}\n                            style={{\n                                fontFamily: \"monospace\",\n                                fontWeight: 100,\n                            }}\n                            fill={disabled ? background : textPrimary}\n                            aria-label={char}\n                        >\n                            {char}\n                        </text>\n                    )}\n                </g>\n            )\n            x += cw + m\n        }\n\n        y += ch + m\n    }\n    return (\n        <SvgWidget\n            tabIndex={0}\n            title={`character screen displaying \"${message}\"`}\n            width={w}\n            height={h}\n        >\n            <>\n                <rect\n                    x={0}\n                    y={0}\n                    width={w}\n                    height={h}\n                    r={m / 2}\n                    fill={background}\n                />\n                {els}\n            </>\n        </SvgWidget>\n    )\n}"],"names":["PREFIX","classes","ack","error","Root","styled","color","fontWeight","theme","backgroundColor","ACK_RESET_DELAY","ERROR_RESET_DELAY","others","bus","useBus","setError","useSnackbar","useState","useAnalytics","mounted","useMounted","_disabled","disabled","run","trackEvent","setAck","setWorking","onClick","ackResetDelay","setAppError","handleClick","ev","statusIcon","modeClassName","elClassName","clsx","useEffect","autoRun","BRAILE_CHARACTERS","$","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Z","Y","_","r","su","s","i","messageRegister","useRegister","CharacterScreenReg","rowsRegister","columnsRegister","textDirectionRegister","variantRegister","brightnessRegister","useRegisterUnpackedValue","handleClear","setFieldMessage","handleFieldMessageChange","rows","columns","converter","variant","CharacterScreenVariant","cmessage","message","rtl","textDirection","CharacterScreenTextDirection","expanded","brightness","useRef","useWidgetTheme","cw","ch","m","mo","fs","w","h","lines","els","y","row","x","line","column","char","fontFamily"],"sourceRoot":""}